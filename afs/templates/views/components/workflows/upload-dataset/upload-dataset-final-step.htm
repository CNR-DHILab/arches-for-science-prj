{% load i18n %}
<!-- ko if: loading() === false -->
<div class="final-step">
    <div class="afs-final-step-section" style="padding: 15px; display: flex; flex-direction: column">
        <h5 class="summary-value">{% trans 'Created or Modified Resource Instance' %}</h5>
        <div style="display: inline-flex; width: inherit; justify-content: space-between;">
            <div style="display: flex; flex-direction: column;">
                <a data-bind="attr: { href: urls.resource + '/' + resourceid}" target="_blank">
                    <div class="summary-value" 
                        data-bind = "text: displayName + ' ({% trans 'Observation Resource Instance' %})'">
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div class="afs-final-step-section" style="padding: 15px; display: flex; flex-direction: column">
        <h5 class="summary-value">{% trans 'Related Project/Object' %}</h5>
        <div style="display: inline-flex; width: inherit; justify-content: space-between;">
            <div style="display: flex; flex-direction: column;">
                <div style="display: inline-flex;">
                    <div class="summary-label" data-bind="text: reportVals.project.name + ':'"></div>
                    <div class="summary-value" data-bind="text: reportVals.project.value"></div>
                </div>
                <div style="display: inline-flex;">
                    <div class="summary-label" data-bind="text: reportVals.usedObject.name + ':'"></div>
                    <div class="summary-value" data-bind="text: reportVals.usedObject.value"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="afs-final-step-section" style="padding: 15px; display: flex; flex-direction: column">
        <h5 class="summary-value">{% trans 'Observation Details' %}</h5>
        <div style="display: inline-flex; width: inherit; justify-content: space-between;">
            <div style="display: flex; flex-direction: column;">
                <div style="display: inline-flex;">
                    <div class="summary-label" data-bind="text: reportVals.usedInstrument.name + ':'"></div>
                    <div class="summary-value" data-bind="text: reportVals.usedInstrument.value"></div>
                </div>
                <div style="display: inline-flex;">
                    <div class="summary-label" data-bind="text: reportVals.usedProcess.name + ':'"></div>
                    <div class="summary-value" data-bind="text: reportVals.usedProcess.value"></div>
                </div>
                <div style="display: inline-flex;">
                    <div class="summary-label" data-bind="text: reportVals.observationName.name + ':'"></div>
                    <div class="summary-value" data-bind="text: reportVals.observationName.value"></div>
                </div>
                <div>
                    <div class="summary-label" data-bind="text: reportVals.statement.name + ':'"></div>
                    <div class="summary-value" data-bind="html: reportVals.statement.value"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="afs-final-step-section" style="padding: 15px; display: flex; flex-direction: column">
        <!-- ko foreach: parentPhysThingAnnotations -->
        <h5 class="summary-value" data-bind="text: name"></h5>
        <div style="display: inline-flex;">
            <div style="border: solid 1px #ddd">
                <div class="iiif-leaflet" data-bind="leaflet: leafletConfig" style="height: 300px; width: 400px"></div>
            </div>
        </div>
        <!-- /ko -->
        <div>
            <div class="file-list" style="display: flex; flex-direction: column;">
                <div class="file-upload-card" style="display: inline-flex; justify-content: space-between;">
                    <div class="summary-label">File Name:</div>
                    <div class="summary-label">Interpretation</div>
                    <div class="summary-label">File Parameters</div>
                </div>
                <!-- ko foreach: fileList -->
                <div class="file-upload-card" style="display: inline-flex; justify-content: space-between;" 
                    data-bind="style: {'border-width': $index() === ($parent.fileList().length - 1) ? '0px' : '1px'}">
                    <div class="summary-value" data-bind="text: name"></div>
                    <div class="summary-value" data-bind="text: size"></div>
                    <div class="summary-value" data-bind="text: url"></div>
                </div>
                <!-- /ko -->
            </div>
            <div class="final-step-section-block-item">
                <div class="block-item files-metadata">
                    <span class="summary-label">{% trans 'Files: ' %}</span>
                    <span class="summary-value" data-bind='text: fileList().length + "{% trans ' files uploaded' %}"'></span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /ko -->
