{% extends "views/report-templates/default.htm" %} 
{% load i18n %} 
{% block report %}

{% block body %}
<div data-bind="foreach: {data: events, as: 'eventName', noChildContext: true}" class="afs-report-section">
    <h2 data-bind="text: eventName + ' Event'" class="afs-report-section-title"></h2>
    <a data-bind="{if: cards[eventName].card && !cards[eventName].card.tiles().length, click:function(){addNewTile(cards[eventName].card)}}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Event" %}</a>
    <a data-bind="{if: cards[eventName].card && cards[eventName].card.tiles().length, click:function(){addNewTile(cards[eventName].card)}}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Event" %}</a>
    <!-- ko ifnot: eventData[eventName].tileid -->
    <div class="afs-nodata-note">No event</div>
    <!-- /ko -->
    <!-- Show this div if there are event data -->
    <!-- Production Event Block (one for each production event) -->
    <!-- ko if: eventData[eventName].tileid --> 
    <div class="afs-report-subsection">
        <h3><i data-bind="click: function() {toggleVisibility(visible.event)}" class="fa fa-angle-double-right toggle"></i> {% trans "Event: " %} <span></span></h3>
        <!-- <a class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit this Event" %}</a>-->

        <div class="afs-nodata-note afs-top-card" style="display: none;">No information for this event</div>

        <div data-bind="visible: visible.event" class="afs-report-collapsible-container">
            <div class="afs-report-subsection-container">
                <div class="afs-report-subsection-item">
                    <div data-bind="" class="afs-block-attributes">
                        <h4 class="afs-block-key">Creator of Event: </h4>
                        <div data-bind="text: eventData[eventName].creator" class="afs-block-value"></div>
                    </div>
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Event Techniques: </h4>
                        <div data-bind="text: eventData[eventName].techniques" class="afs-block-value"></div>
                    </div>
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Location of Event: </h4>
                        <div data-bind="text: eventData[eventName].location" class="afs-block-value"></div>
                    </div>
                </div>

                <div class="afs-report-subsection-item">
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Objects used in Event: </h4>
                        <div data-bind="text: eventData[eventName].objectsUsed" class="afs-block-value"></div>
                    </div>
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Influence on Event: </h4>
                        <div data-bind="text: eventData[eventName].influence" class="afs-block-value"></div>
                    </div>
                </div>
            </div>
        
            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Names</h5>
                <a data-bind="if: eventData[eventName].cards.name, click: function(){addNewTile(eventData[eventName].cards.name)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Event Name" %}</a>


                <!-- ko ifnot: eventData[eventName].names().length -->
                <div class="afs-nodata-note">No names for this event</div>
                <!--/ko-->

                <!-- ko if: eventData[eventName].names().length -->
                <div class="firstchild-container">
                    <!-- Names Table -->
                    <div class="afs-table" style="max-width: 100%">
                        <table class="table table-striped" cellspacing="0" width="100%">
                            <thead>
                                <tr class="afs-table-header">
                                    <th>{% trans "Name" %}</th>
                                    <th class="min-tabletl">{% trans "Type" %}</th>
                                    <th class="min-medium">{% trans "Language" %}</th>
                                    <th class="afs-table-control all"></th>
                                </tr>
                            </thead>
                            <tbody data-bind="dataTablesForEach: { data: eventData[eventName].names, dataTableOptions: nameTableConfig }">
                                <tr>
                                    <td data-bind="text: name"></td>
                                    <td data-bind="text: type"></td>
                                    <td data-bind="text: language"></td>
                                    <td class="afs-table-control">
                                        <div data-bind="if: $parent.eventData[eventName].cards.name">
                                            <a data-bind="click: function() {$parent.editTile(tileid, $parent.eventData[eventName].cards.name)}">
                                                <i class="fa fa-mail-reply"></i>
                                            </a>
                                            <a data-bind="click: function() {$parent.deleteTile(tileid, $parent.eventData[eventName].cards.name)}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--/ko-->
            </div>
            
            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Statements</h5>
                <a data-bind="if: eventData[eventName].cards.statement, click: function(){addNewTile(eventData[eventName].cards.statement)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Event Statement" %}</a>
                <!-- ko ifnot: eventData[eventName].statements().length -->
                <div class="afs-nodata-note">No statements for this event</div>
                <!-- /ko -->

                <!-- ko if: eventData[eventName].statements().length -->
                <div class="firstchild-container">
                    <!-- Statements Table -->
                    <div class="afs-table">
                        <table class="table table-striped" cellspacing="0" width="100%">
                            <thead>
                                <tr class="afs-table-header">
                                    <th>{% trans "Type" %}</th>
                                    <th>{% trans "Statement" %}</th>
                                    <th class="none">{% trans "Language" %}</th>
                                    <th class="none">{% trans "Name of Statement" %}</th>
                                    <th class="afs-table-control all"></th>
                                </tr>
                            </thead>
                            <tbody  data-bind="dataTablesForEach: { data: eventData[eventName].statements, dataTableOptions: statementsTableConfig}">
                                <tr>
                                    <td data-bind="text: type"></td>
                                    <td data-bind="text: content" class="line-clamp-1" style="vertical-align: unset; padding-top: 7px;"></td>
                                    <td data-bind="text: language"></td>
                                    <td data-bind="text: name"></td>
                                    <td class="afs-table-control">
                                        <div data-bind="if: $parent.eventData[eventName].cards.statement">
                                            <a data-bind="click: function() {$parent.editTile(tileid, $parent.eventData[eventName].cards.statement)}">
                                                <i class="fa fa-mail-reply"></i>
                                            </a>
                                            <a data-bind="click: function() {$parent.deleteTile(tileid, $parent.eventData[eventName].cards.statement)}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- /ko -->
            </div>

            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Identifiers</h5>
                <a data-bind="if: eventData[eventName].cards.identifier, click: function(){addNewTile(eventData[eventName].cards.identifier)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Event Identifier" %}</a>
                <!-- ko ifnot: eventData[eventName].identifiers().length -->
                <div class="afs-nodata-note">No identifiers for this event</div>
                <!-- /ko -->

                <!-- ko if: eventData[eventName].identifiers().length -->
                <div class="firstchild-container">
                    <!-- Identifiers Table -->
                    <div class="afs-table">
                        <table class="table table-striped" cellspacing="0" width="100%">
                            <thead>
                                <tr class="afs-table-header">
                                    <th>{% trans "Identifier" %}</th>
                                    <th>{% trans "Type" %}</th>
                                    <th class="afs-table-control all"></th>
                                </tr>
                            </thead>
                            <tbody  data-bind="dataTablesForEach: { data: eventData[eventName].identifiers, dataTableOptions: identifierTableConfig}">
                                <tr>
                                    <td data-bind="text: name"></td>
                                    <td data-bind="text: type"></td>
                                    <td class="afs-table-control">
                                        <div data-bind="if: $parent.eventData[eventName].cards.identifier">
                                            <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.eventData[eventName].cards.identifier)}">
                                                <i class="fa fa-mail-reply"></i>
                                            </a>
                                            <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.eventData[eventName].cards.identifier)}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- /ko -->
            </div>

            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Timespan</h5>
                <a data-bind="if: eventData[eventName].cards.timespan, click: function(){addNewTile(eventData[eventName].cards.timespan)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Event Timespan" %}</a>
                <!-- Show this block if there's NO data -->
                <div class="afs-nodata-note" style="display: none;">No timespan for this event</div>

                <!-- Show this block if there's data -->
                <div class="firstchild-container">
                    <div class="afs-report-subsection-item flex">
                        <div class="afs-block-attributes timespan">
                            <h6 data-bind="product" class="afs-block-key">Beginning of the beginning: </h6>
                            <div data-bind="text: eventData[eventName].timespan().beginningStart" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes timespan">
                            <h6 class="afs-block-key">End of the beginning: </h6>
                            <div data-bind="text: eventData[eventName].timespan().beginningComplete" class="afs-block-value">--</div>
                        </div>
                    </div>
                    <div class="afs-report-subsection-item flex" style="margin-top: -5px;">
                        <div class="afs-block-attributes timespan">
                            <h6 class="afs-block-key">Beginning of the end: </h6>
                            <div data-bind="text: eventData[eventName].timespan().endingStart" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes timespan">
                            <h6 class="afs-block-key">End of the end: </h6>
                            <div data-bind="text: eventData[eventName].timespan().endingComplete" class="afs-block-value"></div>
                        </div>
                    </div>
                    <div class="afs-report-subsection-item flex column-order pad-top pad-btm">
                        <div class="afs-block-attributes">
                            <h6 class="afs-block-key">Name of event timespan: </h6>
                            <div data-bind="text: eventData[eventName].timespan().name" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes">
                            <h6 class="afs-block-key">Duration: </h6>
                            <div data-bind="text: eventData[eventName].timespan().duration" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes">
                            <h6 class="afs-block-key">Name of event duration: </h6>
                            <div data-bind="text: eventData[eventName].timespan().durationEventName" class="afs-block-value"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
    <!-- /ko -->
</div>

{% endblock body %}
{% endblock report %}
{%block isolation%}

<!-- Production Event Parts -->
<div class="afs-report-section">
    <h2 class="afs-report-section-title">{% trans "Production Event Parts" %}</h2>
    <a data-bind="if: cards[eventName].parts, click: function(){addNewTile(cards[eventName].parts)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Part" %}</a>

    <!-- Production Event Part -->
    <div data-bind="foreach:{data: production.parts}" class="afs-report-subsection production-part">
        <div>
            <h3><i data-bind="click: function(){$parent.toggleBlockVisibility(expanded)}" class="fa fa-angle-double-right"></i> {% trans "Production Event Part: " %} <span data-bind="text: name"></span></h3>
            <div class="afs-part-expanded" data-bind="visible: expanded">
                <a data-bind="if: selectedObservable != undefined, click: function(){selectedObservable(true)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit this Part" %}</a>

                <!-- Show this block if there's NO data -->
                <div class="afs-nodata-note afs-top-card" style="display: none;">No information for this event</div>

                <!-- Show this if there is Event data (Top Card) -->
                <div class="afs-report-collapsible-container">
                    <div class="afs-report-subsection-container">
                        <div class="afs-report-subsection-item">
                            <div class="afs-block-attributes">
                                <h4 class="afs-block-key">Creator of Production Event: </h4>
                                <div data-bind="text: creator" class="afs-block-value"></div>
                            </div>
                            <div class="afs-block-attributes">
                                <h4 class="afs-block-key">Production Event Techniques: </h4>
                                <div data-bind="text: technique" class="afs-block-value"></div>
                            </div>
                            <div class="afs-block-attributes">
                                <h4 class="afs-block-key">Location of Production Event: </h4>
                                <div data-bind="text: location" class="afs-block-value"></div>
                            </div>
                        </div>

                        <div class="afs-report-subsection-item">
                            <div class="afs-block-attributes">
                                <h4 class="afs-block-key">Objects used in Production Event: </h4>
                                <div data-bind="text: objectsUsed" class="afs-block-value"></div>
                            </div>
                            <div class="afs-block-attributes">
                                <h4 class="afs-block-key">Influence on Production Event: </h4>
                                <div data-bind="text: influence" class="afs-block-value"></div>
                            </div>
                        </div>
                    </div>
                
                    <!-- Event First Generation Cards -->
                    <div class="afs-report-subsection-firstchild">
                        <h5>Production Event Part Names</h5>
                        <a data-bind="if: eventCards.name, click: function(){$parent.addNewTile(eventCards.name)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Name" %}</a>
                        
                        <!-- ko ifnot: names.length -->
                        <div class="afs-nodata-note" style="display: none;">No names for this part</div>
                        <!-- /ko -->

                        <!-- ko if: names.length -->
                        <div class="firstchild-container">
                            
                            <!-- Names Table -->
                            <div class="afs-table" style="max-width: 100%;">
                                <table class="table table-striped" cellspacing="0" width="100%">
                                    <thead>
                                        <tr class="afs-table-header">
                                            <th>{% trans "Name" %}</th>
                                            <th class="min-tabletl">{% trans "Type" %}</th>
                                            <th class="min-medium">{% trans "Language" %}</th>
                                            <th class="afs-table-control all"></th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="dataTablesForEach: { data: names, dataTableOptions: $parent.nameTableConfig }">
                                        <tr>
                                            <td data-bind="text: name"></td>
                                            <td data-bind="text: nameType"></td>
                                            <td data-bind="text: nameLanguage"></td>
                                            <td class="afs-table-control">
                                                <div data-bind="if: $parent.eventCards.name">
                                                    <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.eventCards.name)}">
                                                        <i class="fa fa-mail-reply"></i>
                                                    </a>
                                                    <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.eventCards.name)}">
                                                        <i class="fa fa-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>
                    
                    <!-- Event First Generation Cards -->
                    <div class="afs-report-subsection-firstchild">
                        <h5>Production Event Part Statements</h5>
                        <a data-bind="if: eventCards.statements, click: function(){$parent.addNewTile(eventCards.statements)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Statement" %}</a>
                        
                        <!-- ko ifnot: statements.length -->
                        <div class="afs-nodata-note">No statements for this part</div>
                        <!-- /ko -->

                        <!-- ko if: statements.length -->
                        <div class="firstchild-container">
                            <!-- Statements Table -->
                            <div class="afs-table">
                                <table class="table table-striped" cellspacing="0" width="100%">
                                    <thead>
                                        <tr class="afs-table-header">
                                            <th>{% trans "Type" %}</th>
                                            <th>{% trans "Statement" %}</th>
                                            <th class="none">{% trans "Language" %}</th>
                                            <th class="none">{% trans "Name of Statement" %}</th>
                                            <th class="afs-table-control all"></th>
                                        </tr>
                                    </thead>
                                    <tbody  data-bind="dataTablesForEach: { data: statements, dataTableOptions: $parent.statementsTableConfig}">
                                        <tr>
                                            <td data-bind="text: statementType"></td>
                                            <td data-bind="text: statementContent" class="line-clamp-1" style="vertical-align: unset; padding-top: 7px;"></td>
                                            <td data-bind="text: statementLanguage"></td>
                                            <td data-bind="text: statementName"></td>
                                            <td class="afs-table-control">
                                                <div data-bind="if: $parent.eventCards.statements">
                                                    <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.eventCards.statements)}">
                                                        <i class="fa fa-mail-reply"></i>
                                                    </a>
                                                    <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.eventCards.statements)}">
                                                        <i class="fa fa-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>

                    <!-- Event First Generation Cards -->
                    <div class="afs-report-subsection-firstchild">
                        <h5>Production Event Part Identifiers</h5>
                        <a data-bind="if: eventCards.identifier, click: function(){$parent.addNewTile(eventCards.identifier)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Identifier" %}</a>
                        
                        <!-- ko ifnot: identifiers.length -->
                        <div class="afs-nodata-note">No identifiers for this part</div>
                        <!-- /ko-->
                        
                        <!-- ko if: statements.length -->
                        <div class="firstchild-container">
                            <!-- Statements Table -->
                            <div class="afs-table">
                                <table class="table table-striped" cellspacing="0" width="100%">
                                    <thead>
                                        <tr class="afs-table-header">
                                            <th>{% trans "Identifier" %}</th>
                                            <th>{% trans "Type" %}</th>
                                            <th class="afs-table-control all"></th>
                                        </tr>
                                    </thead>
                                    <tbody  data-bind="dataTablesForEach: { data: identifiers, dataTableOptions: $parent.identifierTableConfig}">
                                        <tr>
                                            <td data-bind="text: identifier"></td>
                                            <td data-bind="text: identifierType"></td>
                                            <td class="afs-table-control">
                                                <div data-bind="if: $parent.eventCards.identifier">
                                                    <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.eventCards.identifier)}">
                                                        <i class="fa fa-mail-reply"></i>
                                                    </a>
                                                    <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.eventCards.identifier)}">
                                                        <i class="fa fa-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>

                    <!-- Event First Generation Cards -->
                    <div class="afs-report-subsection-firstchild">
                        <h5>Production Event Part Timespan</h5>
                        <a data-bind="if: eventCards.timespan, click: function(){$parent.addNewTile(eventCards.timespan)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Timespan" %}</a>
                        <!-- Show this block if there's NO data -->
                        <div class="afs-nodata-note" style="display: none;">No timespan for this event</div>

                        <!-- Show this block if there's data -->
                        <div class="firstchild-container">
                            <div class="afs-report-subsection-item flex">
                                <div class="afs-block-attributes timespan">
                                    <span data-bind="text: console.log(timespan)"></span>
                                    <h6 class="afs-block-key">Beginning of the beginning: </h6>
                                    <div data-bind="text: timespan.beginningStart" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes timespan">
                                    <h6 class="afs-block-key">End of the beginning: </h6>
                                    <div data-bind="text: timespan.beginningComplete" class="afs-block-value"></div>
                                </div>
                            </div>
                            <div class="afs-report-subsection-item flex" style="margin-top: -5px;">
                                <div class="afs-block-attributes timespan">
                                    <h6 class="afs-block-key">Beginning of the end: </h6>
                                    <div data-bind="text: timespan.endingStart" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes timespan">
                                    <h6 class="afs-block-key">End of the end: </h6>
                                    <div data-bind="text: timespan.endingComplete" class="afs-block-value"></div>
                                </div>
                            </div>
                            <div class="afs-report-subsection-item flex column-order pad-top pad-btm">
                                <div class="afs-block-attributes">
                                    <h6 class="afs-block-key">Name of event timespan: </h6>
                                    <div data-bind="text: timespan.name" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes">
                                    <h6 class="afs-block-key">Duration: </h6>
                                    <div data-bind="text: timespan.duration" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes">
                                    <h6 class="afs-block-key">Name of event duration: </h6>
                                    <div data-bind="text: timespan.durationEventName" class="afs-block-value"></div>
                                </div>
                            </div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{%endblock isolation%}