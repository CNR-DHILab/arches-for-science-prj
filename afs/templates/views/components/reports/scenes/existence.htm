{% extends "views/report-templates/default.htm" %} 
{% load i18n %} 
{% block report %}

{% block body %}
<div data-bind="foreach: {data: events, as: 'eventName', noChildContext: true}" class="afs-report-section">
    <h2 data-bind="text: eventName + ' Event'" class="afs-report-section-title"></h2>
    <span data-bind="if: cards[eventName] && cards[eventName].card && !cards[eventName].card.tiles().length,">
        <a data-bind="{click:function(){$parent.addNewTile(cards[eventName].card)}}" class="afs-report-a">
            <i class="fa fa-mail-reply"></i> {% trans "Add Event" %}
        </a>
    </span>
    <span data-bind="if: cards[eventName] && cards[eventName].card && cards[eventName].card.tiles().length">
    <a data-bind="{click:function(){$parent.addNewTile(cards[eventName].card)}}" class="afs-report-a">
        <i class="fa fa-mail-reply"></i> {% trans "Edit Event" %}
    </a>
    <!-- ko if: eventDataArray[eventName].length === 0 || !eventDataArray[eventName].some(x => x !== undefined) -->
    <div class="afs-nodata-note">No events</div>
    <!-- /ko -->

    <!-- Show this div if there are event data -->
    <!-- Event Block (one for each event) -->
    <!-- ko if: eventDataArray[eventName].length > 0 && eventDataArray[eventName].some(x => x !== undefined) -->
    
    <!-- ko foreach: { data: eventDataArray[eventName], as: "eventData" } -->
    <!-- ko if: !!eventData && eventData.tileid -->
    <div class="afs-report-subsection">
        <h2 class="afs-report-section-title">{% trans "Event Details" %}</h2>
        <h3 style="display: block ;"><i data-bind="click: function() {$parent.toggleVisibility(eventData.visible)}" class="fa fa-angle-double-right toggle"></i> {% trans "Event: " %} <span></span></h3>
        <!-- <a class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit this Event" %}</a>-->

        <div class="afs-nodata-note afs-top-card" style="display: none;">No information for this event</div>

        <div data-bind="visible: eventData.visible" class="afs-report-collapsible-container">
            <div class="afs-report-subsection-container">
                <div class="afs-report-subsection-item">
                    <div data-bind="" class="afs-block-attributes">
                        <h4 class="afs-block-key">Creator of Event: </h4>
                        <div data-bind="text: eventData.creator" class="afs-block-value"></div>
                    </div>
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Event Techniques: </h4>
                        <div data-bind="text: eventData.techniques" class="afs-block-value"></div>
                    </div>
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Location of Event: </h4>
                        <div data-bind="text: eventData.location" class="afs-block-value"></div>
                    </div>
                </div>

                <div class="afs-report-subsection-item">
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Objects used in Event: </h4>
                        <div data-bind="text: eventData.objectsUsed" class="afs-block-value"></div>
                    </div>
                    <div class="afs-block-attributes">
                        <h4 class="afs-block-key">Influence on Event: </h4>
                        <div data-bind="text: eventData.influence" class="afs-block-value"></div>
                    </div>
                </div>
            </div>
        
            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Names</h5>
                <span data-bind="if: eventData.cards && eventData.cards.name">
                    <a data-bind="click: function(){$parent.addNewTile(eventData.cards.name)}" class="afs-report-a">
                        <i class="fa fa-mail-reply"></i> {% trans "Add Event Name" %}
                    </a>
                </span>


                <!-- ko ifnot: eventData.names().length -->
                <div class="afs-nodata-note">No names for this event</div>
                <!--/ko-->

                <!-- ko if: eventData.names().length -->
                <div class="firstchild-container">
                    <!-- Names Table -->
                    <div class="afs-table" style="max-width: 100%">
                        <table class="table table-striped" cellspacing="0" width="100%">
                            <thead>
                                <tr class="afs-table-header">
                                    <th>{% trans "Name" %}</th>
                                    <th class="min-tabletl">{% trans "Type" %}</th>
                                    <th class="min-medium">{% trans "Language" %}</th>
                                    <th class="afs-table-control all"></th>
                                </tr>
                            </thead>
                            <tbody data-bind="dataTablesForEach: { data: eventData.names, dataTableOptions: $parent.nameTableConfig }">
                                <tr>
                                    <td data-bind="text: name"></td>
                                    <td data-bind="text: type"></td>
                                    <td data-bind="text: language"></td>
                                    <td class="afs-table-control">
                                        <div data-bind="if: eventData.cards && eventData.cards.name && eventData.cards.name.tiles().length">
                                            <a data-bind="click: function() {$parents[1].editTile(tileid, eventData.cards.name)}">
                                                <i class="fa fa-mail-reply"></i>
                                            </a>
                                            <a data-bind="click: function() {$parents[1].deleteTile(tileid, eventData.cards.name)}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--/ko-->
            </div>
            
            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Statements</h5>
                <a data-bind="if: eventData.cards && eventData.cards.statement, click: function(){$parent.addNewTile(eventData.cards.statement)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Event Statement" %}</a>
                <!-- ko ifnot: eventData.statements().length -->
                <div class="afs-nodata-note">No statements for this event</div>
                <!-- /ko -->

                <!-- ko if: eventData.statements().length -->
                <div class="firstchild-container">
                    <!-- Statements Table -->
                    <div class="afs-table">
                        <table class="table table-striped" cellspacing="0" width="100%">
                            <thead>
                                <tr class="afs-table-header">
                                    <th>{% trans "Type" %}</th>
                                    <th>{% trans "Statement" %}</th>
                                    <th class="none">{% trans "Language" %}</th>
                                    <th class="none">{% trans "Name of Statement" %}</th>
                                    <th class="afs-table-control all"></th>
                                </tr>
                            </thead>
                            <tbody  data-bind="dataTablesForEach: { data: eventData.statements, dataTableOptions: $parent.statementsTableConfig}">
                                <tr>
                                    <td data-bind="text: type"></td>
                                    <td data-bind="text: content" class="line-clamp-1" style="vertical-align: unset; padding-top: 7px;"></td>
                                    <td data-bind="text: language"></td>
                                    <td data-bind="text: name"></td>
                                    <td class="afs-table-control">
                                        <div data-bind="if: eventData.cards && eventData.cards.statement && eventData.cards.statement.tiles().length">
                                            <a data-bind="click: function() {$parents[1].editTile(tileid, eventData.cards.statement)}">
                                                <i class="fa fa-mail-reply"></i>
                                            </a>
                                            <a data-bind="click: function() {$parents[1].deleteTile(tileid, eventData.cards.statement)}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- /ko -->
            </div>

            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Identifiers</h5>
                <a data-bind="if: eventData.cards && eventData.cards.identifier, click: function(){$parent.addNewTile(eventData.cards.identifier)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Event Identifier" %}</a>
                <!-- ko ifnot: eventData.identifiers().length -->
                <div class="afs-nodata-note">No identifiers for this event</div>
                <!-- /ko -->

                <!-- ko if: eventData.identifiers().length -->
                <div class="firstchild-container">
                    <!-- Identifiers Table -->
                    <div class="afs-table">
                        <table class="table table-striped" cellspacing="0" width="100%">
                            <thead>
                                <tr class="afs-table-header">
                                    <th>{% trans "Identifier" %}</th>
                                    <th>{% trans "Type" %}</th>
                                    <th class="afs-table-control all"></th>
                                </tr>
                            </thead>
                            <tbody  data-bind="dataTablesForEach: { data: eventData.identifiers, dataTableOptions: $parent.identifierTableConfig}">
                                <tr>
                                    <td data-bind="text: name"></td>
                                    <td data-bind="text: type"></td>
                                    <td class="afs-table-control">
                                        <div data-bind="if: eventData.cards && eventData.cards.identifier && eventData.cards.identifier.tiles().length">
                                            <a data-bind="click: function() {$parents[1].editTile(tileid, eventData.cards.identifier)}">
                                                <i class="fa fa-mail-reply"></i>
                                            </a>
                                            <a data-bind="click: function() {$parents[1].deleteTile(tileid, eventData.cards.identifier)}">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- /ko -->
            </div>

            <!-- Event First Generation Cards -->
            <div class="afs-report-subsection-firstchild">
                <h5>Event Timespan</h5>
                <span data-bind="if: eventData.cards && eventData.cards.timespan">
                    <a data-bind="click: function(){$parent.addNewTile(eventData.cards.timespan)}" class="afs-report-a">
                        <i class="fa fa-mail-reply"></i> {% trans "Edit Event Timespan" %}
                    </a>
                </span>
                <!-- Show this block if there's NO data -->
                <div class="afs-nodata-note" style="display: none;">No timespan for this event</div>

                <!-- Show this block if there's data -->
                <div class="firstchild-container">
                    <div class="afs-report-subsection-item flex">
                        <div class="afs-block-attributes timespan">
                            <h6 data-bind="product" class="afs-block-key">Beginning of the beginning: </h6>
                            <div data-bind="text: eventData.timespan().beginningStart" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes timespan">
                            <h6 class="afs-block-key">End of the beginning: </h6>
                            <div data-bind="text: eventData.timespan().beginningComplete" class="afs-block-value">--</div>
                        </div>
                    </div>
                    <div class="afs-report-subsection-item flex" style="margin-top: -5px;">
                        <div class="afs-block-attributes timespan">
                            <h6 class="afs-block-key">Beginning of the end: </h6>
                            <div data-bind="text: eventData.timespan().endingStart" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes timespan">
                            <h6 class="afs-block-key">End of the end: </h6>
                            <div data-bind="text: eventData.timespan().endingComplete" class="afs-block-value"></div>
                        </div>
                    </div>
                    <div class="afs-report-subsection-item flex column-order pad-top pad-btm">
                        <div class="afs-block-attributes">
                            <h6 class="afs-block-key">Name of event timespan: </h6>
                            <div data-bind="text: eventData.timespan().name" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes">
                            <h6 class="afs-block-key">Duration: </h6>
                            <div data-bind="text: eventData.timespan().duration" class="afs-block-value"></div>
                        </div>
                        <div class="afs-block-attributes">
                            <h6 class="afs-block-key">Name of event duration: </h6>
                            <div data-bind="text: eventData.timespan().durationEventName" class="afs-block-value"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-bind="if: eventData.parts && eventData.parts().length" class="afs-report-subsection">
        <h2 class="afs-report-section-title">{% trans "Event Parts" %}</h2>
        <a data-bind="if: $parent.cards[eventName].parts, click: function(){$parent.addNewTile($parent.cards[eventName].parts)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Add Part" %}</a>
    
        <!-- Event Part -->
        <div data-bind="foreach:{ data: eventData.parts }" class="part">
            <div>
                <h3><i data-bind="click: function(){$parent.toggleVisibility(visible)}" class="fa fa-angle-double-right"></i> {% trans "Event Part: " %} <span data-bind="text: name"></span></h3>
                <div class="afs-part-expanded" data-bind="visible: visible">
                    <a data-bind="click: function(){$parent.editTile(tileid, cards.identifier)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit this Part" %}</a>
    
                    <!-- Show this block if there's NO data -->
                    <div class="afs-nodata-note afs-top-card" style="display: none;">No information for this event</div>
    
                    <!-- Show this if there is Event data (Top Card) -->
                    <div class="afs-report-collapsible-container">
                        <div class="afs-report-subsection-container">
                            <div class="afs-report-subsection-item">
                                <div class="afs-block-attributes">
                                    <h4 class="afs-block-key">Creator of Event: </h4>
                                    <div data-bind="text: creator" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes">
                                    <h4 class="afs-block-key">Event Techniques: </h4>
                                    <div data-bind="text: techniques" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes">
                                    <h4 class="afs-block-key">Location of Event: </h4>
                                    <div data-bind="text: location" class="afs-block-value"></div>
                                </div>
                            </div>
    
                            <div class="afs-report-subsection-item">
                                <div class="afs-block-attributes">
                                    <h4 class="afs-block-key">Objects used in Event: </h4>
                                    <div data-bind="text: objectsUsed" class="afs-block-value"></div>
                                </div>
                                <div class="afs-block-attributes">
                                    <h4 class="afs-block-key">Influence on Event: </h4>
                                    <div data-bind="text: influence" class="afs-block-value"></div>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Event First Generation Cards -->
                        <div class="afs-report-subsection-firstchild">
                            <h5>Event Part Names</h5>
                            <a data-bind="if: $data.cards && $data.cards.name, click: function(){$parent.addNewTile(cards.name)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Name" %}</a>
                            <!-- ko ifnot: $data.names().length -->
                            <div class="afs-nodata-note">No names for this part</div>
                            <!-- /ko -->
    
                            <!-- ko if: $data.names().length -->
                            <div class="firstchild-container">
                                
                                <!-- Names Table -->
                                <div class="afs-table" style="max-width: 100%;">
                                    <table class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr class="afs-table-header">
                                                <th>{% trans "Name" %}</th>
                                                <th class="min-tabletl">{% trans "Type" %}</th>
                                                <th class="min-medium">{% trans "Language" %}</th>
                                                <th class="afs-table-control all"></th>
                                            </tr>
                                        </thead>
                                        <tbody data-bind="dataTablesForEach: { data: $data.names, dataTableOptions: $parent.nameTableConfig }">
                                            <tr>
                                                <td data-bind="text: name"></td>
                                                <td data-bind="text: type"></td>
                                                <td data-bind="text: language"></td>
                                                <td class="afs-table-control">
                                                    <div data-bind="if: $parent.cards.name && $parent.cards.name.tiles().length">
                                                        <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.cards.name)}">
                                                            <i class="fa fa-mail-reply"></i>
                                                        </a>
                                                        <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.cards.name)}">
                                                            <i class="fa fa-trash"></i>
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /ko -->
                        </div>
                        
                        <!-- Event First Generation Cards -->
                        <div class="afs-report-subsection-firstchild">
                            <h5>Event Part Statements</h5>
                            <a data-bind="if: $data.cards && $data.cards.statement, click: function(){$parent.addNewTile($data.cards.statement)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Statement" %}</a>
                            
                            <!-- ko ifnot: $data.statements().length -->
                            <div class="afs-nodata-note">No statements for this part</div>
                            <!-- /ko -->
    
                            <!-- ko if: $data.statements().length -->
                            <div class="firstchild-container">
                                <!-- Statements Table -->
                                <div class="afs-table">
                                    <table class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr class="afs-table-header">
                                                <th>{% trans "Type" %}</th>
                                                <th>{% trans "Statement" %}</th>
                                                <th class="none">{% trans "Language" %}</th>
                                                <th class="none">{% trans "Name of Statement" %}</th>
                                                <th class="afs-table-control all"></th>
                                            </tr>
                                        </thead>
                                        <tbody  data-bind="dataTablesForEach: { data: statements, dataTableOptions: $parent.statementsTableConfig}">
                                            <tr>
                                                <td data-bind="text: type"></td>
                                                <td data-bind="text: content" class="line-clamp-1" style="vertical-align: unset; padding-top: 7px;"></td>
                                                <td data-bind="text: language"></td>
                                                <td data-bind="text: name"></td>
                                                <td class="afs-table-control">
                                                    <div data-bind="if: $parent.cards.statement && $parent.cards.statement.tiles().length">
                                                        <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.cards.statement)}">
                                                            <i class="fa fa-mail-reply"></i>
                                                        </a>
                                                        <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.cards.statement)}">
                                                            <i class="fa fa-trash"></i>
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /ko -->
                        </div>
    
                        <!-- Event First Generation Cards -->
                        <div class="afs-report-subsection-firstchild">
                            <h5>Event Part Identifiers</h5>
                            <a data-bind="if: $data.cards && $data.cards.identifier, click: function(){$parent.addNewTile($data.cards.identifier)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Identifier" %}</a>
                            
                            <!-- ko ifnot: identifiers().length -->
                            <div class="afs-nodata-note">No identifiers for this part</div>
                            <!-- /ko-->
                            
                            <!-- ko if: identifiers().length -->
                            <div class="firstchild-container">
                                <!-- Identifiers Table -->
                                <div class="afs-table">
                                    <table class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr class="afs-table-header">
                                                <th>{% trans "Identifier" %}</th>
                                                <th>{% trans "Type" %}</th>
                                                <th class="afs-table-control all"></th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody  data-bind="dataTablesForEach: { data: identifiers, dataTableOptions: $parent.identifierTableConfig}">
                                            <tr>
                                                <td data-bind="text: name"></td>
                                                <td data-bind="text: type"></td>
                                                <td class="afs-table-control">
                                                    <div data-bind="if: $parent.cards.identifier && $parent.cards.identifier.tiles().length">
                                                        <a data-bind="click: function() {$parents[1].editTile(tileid, $parent.cards.identifier)}">
                                                            <i class="fa fa-mail-reply"></i>
                                                        </a>
                                                        <a data-bind="click: function() {$parents[1].deleteTile(tileid, $parent.cards.identifier)}">
                                                            <i class="fa fa-trash"></i>
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /ko -->
                        </div>
    
                        <!-- Event First Generation Cards -->
                        <div class="afs-report-subsection-firstchild">
                            <h5>Event Part Timespan</h5>
                            <a data-bind="if: $data.cards && $data.cards.timespan, click: function(){$parent.addNewTile(cards.timespan)}" class="afs-report-a"><i class="fa fa-mail-reply"></i> {% trans "Edit Part Timespan" %}</a>
                            <!-- Show this block if there's NO data -->
                            <div class="afs-nodata-note">No timespan for this event</div>
    
                            <!-- Show this block if there's data -->
                            <div class="firstchild-container">
                                <div class="afs-report-subsection-item flex">
                                    <div class="afs-block-attributes timespan">
                                        <h6 class="afs-block-key">Beginning of the beginning: </h6>
                                        <div data-bind="text: timespan().beginningStart" class="afs-block-value"></div>
                                    </div>
                                    <div class="afs-block-attributes timespan">
                                        <h6 class="afs-block-key">End of the beginning: </h6>
                                        <div data-bind="text: timespan().beginningComplete" class="afs-block-value"></div>
                                    </div>
                                </div>
                                <div class="afs-report-subsection-item flex" style="margin-top: -5px;">
                                    <div class="afs-block-attributes timespan">
                                        <h6 class="afs-block-key">Beginning of the end: </h6>
                                        <div data-bind="text: timespan().endingStart" class="afs-block-value"></div>
                                    </div>
                                    <div class="afs-block-attributes timespan">
                                        <h6 class="afs-block-key">End of the end: </h6>
                                        <div data-bind="text: timespan().endingComplete" class="afs-block-value"></div>
                                    </div>
                                </div>
                                <div class="afs-report-subsection-item flex column-order pad-top pad-btm">
                                    <div class="afs-block-attributes">
                                        <h6 class="afs-block-key">Name of event timespan: </h6>
                                        <div data-bind="text: timespan().name" class="afs-block-value"></div>
                                    </div>
                                    <div class="afs-block-attributes">
                                        <h6 class="afs-block-key">Duration: </h6>
                                        <div data-bind="text: timespan().duration" class="afs-block-value"></div>
                                    </div>
                                    <div class="afs-block-attributes">
                                        <h6 class="afs-block-key">Name of event duration: </h6>
                                        <div data-bind="text: timespan().durationEventName" class="afs-block-value"></div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /ko -->
    <!-- /ko -->
    <!-- /ko -->
</div>

{% endblock body %}
{% endblock report %}
{%block isolation%}


{%endblock isolation%}